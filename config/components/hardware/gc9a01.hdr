// gc9a01 component header
// Defines data structures for GC9A01 display

#ifndef GC9A01_HDR
#define GC9A01_HDR

#include <stdint.h>

// Display driver parameters for GC9A01 circular display  
// Note: Variables scoped within gc9a01 struct to avoid global namespace conflicts

// This struct acts as a "type bundle" for the gc9a01 hardware.
// It will be used as a template parameter for components that need its properties.
struct gc9a01
{
    // Standardized interface members
    static const int WIDTH = 240;
    static const int HEIGHT = 240;

    // Standardized color channel maximums
    static const int MAX_RED   = 0x1F;
    static const int MAX_GREEN = 0x3F;
    static const int MAX_BLUE  = 0x1F;

    // Standardized nested Pixel type
    struct Pixel
    {
        unsigned int red : 5;
        unsigned int green : 6;
        unsigned int blue : 5;

        // Default constructor
        Pixel() : red(0), green(0), blue(0) {}

        // Copy constructor
        Pixel(const Pixel& other)
        {
            red = other.red;
            green = other.green;
            blue = other.blue;
        }

        // Assignment operator
        Pixel& operator=(const Pixel& other)
        {
            red = other.red;
            green = other.green;
            blue = other.blue;
            return *this;
        }

        // Add two pixels with saturation
        Pixel operator+(const Pixel& other) const
        {
            Pixel result;
            unsigned int sum_r = red + other.red;
            result.red = (sum_r > MAX_RED) ? MAX_RED : sum_r;
            unsigned int sum_g = green + other.green;
            result.green = (sum_g > MAX_GREEN) ? MAX_GREEN : sum_g;
            unsigned int sum_b = blue + other.blue;
            result.blue = (sum_b > MAX_BLUE) ? MAX_BLUE : sum_b;
            return result;
        }
    };
};

#endif // GC9A01_HDR
