{
  "relative_filename": "config/components/interfaces/a4988_stepper_driver.json",
  "version": "1.0.0",
  "author": "config/author.json",
  
  "interface_id": "A4988_STEPPER_DRIVER",
  "interface_type": "STEPPER_MOTOR_DRIVER",
  "description": "A4988 stepper motor driver interface for NEMA17 and smaller stepper motors",
  
  "hardware_specifications": {
    "compatible_motors": ["NEMA17", "NEMA14", "NEMA11", "28BYJ48_BIPOLAR"],
    "voltage_range": "8V_TO_35V_MOTOR_SUPPLY",
    "logic_voltage": "3V_TO_5.5V",
    "current_per_phase": "1A_CONTINUOUS_2A_PEAK",
    "microstepping": ["FULL", "HALF", "QUARTER", "EIGHTH", "SIXTEENTH"],
    "step_resolution": "200_TO_3200_STEPS_PER_REV",
    "package": "28_PIN_QFN"
  },
  
  "pin_requirements": {
    "step_pin": {
      "function": "step_pulse_input",
      "generic_name": "step",
      "description": "Step pulse input - rising edge triggers step",
      "voltage_level": "3.3V_5V",
      "signal_type": "DIGITAL_PULSE",
      "min_pulse_width": "1us"
    },
    "direction_pin": {
      "function": "rotation_direction",
      "generic_name": "dir",
      "description": "Direction control - HIGH/LOW sets rotation direction",
      "voltage_level": "3.3V_5V",
      "signal_type": "DIGITAL",
      "setup_time": "200ns_BEFORE_STEP"
    },
    "enable_pin": {
      "function": "driver_enable",
      "generic_name": "enable",
      "description": "Enable driver outputs - LOW enables, HIGH disables",
      "voltage_level": "3.3V_5V",
      "signal_type": "DIGITAL",
      "default_state": "LOW_ENABLED",
      "active_logic": "ACTIVE_LOW"
    }
  },
  
  "microstepping_pins": {
    "ms1_pin": {
      "function": "microstep_select_1",
      "generic_name": "ms1",
      "description": "Microstepping selection bit 1",
      "voltage_level": "3.3V_5V",
      "signal_type": "DIGITAL"
    },
    "ms2_pin": {
      "function": "microstep_select_2", 
      "generic_name": "ms2",
      "description": "Microstepping selection bit 2",
      "voltage_level": "3.3V_5V",
      "signal_type": "DIGITAL"
    },
    "ms3_pin": {
      "function": "microstep_select_3",
      "generic_name": "ms3", 
      "description": "Microstepping selection bit 3",
      "voltage_level": "3.3V_5V",
      "signal_type": "DIGITAL"
    }
  },
  
  "power_pins": {
    "vmot_pin": {
      "function": "motor_power_supply",
      "generic_name": "vmot",
      "description": "Motor power supply input",
      "voltage_level": "8V_TO_35V",
      "current_capacity": "2A_PEAK"
    },
    "vdd_pin": {
      "function": "logic_power_supply",
      "generic_name": "vdd",
      "description": "Logic power supply input",
      "voltage_level": "3V_TO_5.5V",
      "current_consumption": "20mA_TYPICAL"
    },
    "gnd_pin": {
      "function": "ground_reference",
      "generic_name": "gnd",
      "description": "Ground reference for logic and power",
      "voltage_level": "0V"
    }
  },
  
  "motor_connection_pins": {
    "motor_a1_pin": {
      "function": "motor_coil_a_positive",
      "generic_name": "1a",
      "description": "Motor coil A positive terminal",
      "current_capacity": "2A_PEAK"
    },
    "motor_a2_pin": {
      "function": "motor_coil_a_negative",
      "generic_name": "1b",
      "description": "Motor coil A negative terminal", 
      "current_capacity": "2A_PEAK"
    },
    "motor_b1_pin": {
      "function": "motor_coil_b_positive",
      "generic_name": "2a",
      "description": "Motor coil B positive terminal",
      "current_capacity": "2A_PEAK"
    },
    "motor_b2_pin": {
      "function": "motor_coil_b_negative",
      "generic_name": "2b",
      "description": "Motor coil B negative terminal",
      "current_capacity": "2A_PEAK"
    }
  },
  
  "optional_pins": {
    "reset_pin": {
      "function": "driver_reset",
      "generic_name": "reset",
      "description": "Reset driver to initial state - active LOW",
      "voltage_level": "3.3V_5V",
      "signal_type": "DIGITAL",
      "active_logic": "ACTIVE_LOW",
      "optional": true
    },
    "sleep_pin": {
      "function": "low_power_mode",
      "generic_name": "sleep",
      "description": "Sleep mode control - LOW disables driver",
      "voltage_level": "3.3V_5V", 
      "signal_type": "DIGITAL",
      "active_logic": "ACTIVE_LOW",
      "optional": true
    }
  },
  
  "microstepping_configuration": {
    "full_step": {
      "ms1": "LOW",
      "ms2": "LOW", 
      "ms3": "LOW",
      "steps_per_revolution": 200,
      "torque": "MAXIMUM",
      "smoothness": "LOWEST"
    },
    "half_step": {
      "ms1": "HIGH",
      "ms2": "LOW",
      "ms3": "LOW", 
      "steps_per_revolution": 400,
      "torque": "HIGH",
      "smoothness": "LOW"
    },
    "quarter_step": {
      "ms1": "LOW",
      "ms2": "HIGH",
      "ms3": "LOW",
      "steps_per_revolution": 800,
      "torque": "MEDIUM",
      "smoothness": "MEDIUM"
    },
    "eighth_step": {
      "ms1": "HIGH", 
      "ms2": "HIGH",
      "ms3": "LOW",
      "steps_per_revolution": 1600,
      "torque": "LOW",
      "smoothness": "HIGH"
    },
    "sixteenth_step": {
      "ms1": "HIGH",
      "ms2": "HIGH",
      "ms3": "HIGH",
      "steps_per_revolution": 3200,
      "torque": "LOWEST",
      "smoothness": "HIGHEST"
    }
  },
  
  "timing_specifications": {
    "step_pulse_timing": {
      "min_pulse_width": "1us",
      "min_pulse_spacing": "1us",
      "max_step_frequency": "500kHz",
      "direction_setup_time": "200ns"
    },
    "enable_timing": {
      "enable_to_step_delay": "650ns_TYPICAL",
      "disable_to_tristrate": "650ns_TYPICAL"
    },
    "microstepping_timing": {
      "ms_setup_time": "200ns_BEFORE_STEP",
      "ms_hold_time": "200ns_AFTER_STEP"
    }
  },
  
  "current_regulation": {
    "vref_voltage": "0V_TO_2V",
    "current_formula": "I_TRIP = VREF / (8 * RS)",
    "sense_resistor": "0.1_OHM_TYPICAL",
    "max_current_0.1ohm": "2A_WITH_2V_VREF",
    "current_adjustment": "POTENTIOMETER_OR_DAC_VREF"
  },
  
  "protection_features": {
    "thermal_shutdown": {
      "threshold": "165C_TYPICAL",
      "hysteresis": "15C",
      "action": "DISABLE_OUTPUTS"
    },
    "overcurrent_protection": {
      "detection": "CYCLE_BY_CYCLE_CURRENT_LIMITING",
      "response_time": "2.9us_TYPICAL"
    },
    "undervoltage_lockout": {
      "vdd_threshold": "2.2V_RISING_2.0V_FALLING", 
      "vmot_threshold": "7V_TYPICAL"
    },
    "crossover_current_protection": {
      "dead_time": "AUTOMATIC_INSERTION",
      "shoot_through_prevention": "BUILT_IN"
    }
  },
  
  "manufacturer_pin_mappings": {
    "pololu_a4988": {
      "step": ["STEP"],
      "dir": ["DIR"],
      "enable": ["EN"],
      "ms1": ["MS1"],
      "ms2": ["MS2"], 
      "ms3": ["MS3"],
      "reset": ["RST"],
      "sleep": ["SLP"],
      "vmot": ["VMOT"],
      "vdd": ["VDD"],
      "gnd": ["GND"],
      "motor_a1": ["1A"],
      "motor_a2": ["1B"],
      "motor_b1": ["2A"],
      "motor_b2": ["2B"]
    },
    "bigtreetech_a4988": {
      "step": ["STEP", "STP"],
      "dir": ["DIR"],
      "enable": ["EN", "ENABLE"],
      "vmot": ["VIN", "MOTOR_POWER"],
      "vdd": ["3.3V", "5V"]
    },
    "generic_a4988": {
      "step": ["STEP", "STP", "PULSE"],
      "dir": ["DIR", "DIRECTION"],
      "enable": ["EN", "ENABLE", "ENA"]
    }
  },
  
  "application_examples": {
    "goblin_shoulder_joint": {
      "motor": "NEMA17_42mm",
      "microstepping": "EIGHTH_STEP_1600_STEPS_REV",
      "current_setting": "1.2A",
      "max_speed": "1000_STEPS_PER_SECOND",
      "use_case": "PRECISE_ARM_POSITIONING"
    },
    "head_pan_mechanism": {
      "motor": "NEMA14_35mm",
      "microstepping": "SIXTEENTH_STEP_3200_STEPS_REV",
      "current_setting": "0.8A",
      "max_speed": "2000_STEPS_PER_SECOND",
      "use_case": "SMOOTH_HEAD_ROTATION"
    },
    "finger_articulation": {
      "motor": "NEMA11_28mm",
      "microstepping": "QUARTER_STEP_800_STEPS_REV",
      "current_setting": "0.5A",
      "max_speed": "500_STEPS_PER_SECOND",
      "use_case": "PRECISE_FINGER_CONTROL"
    }
  }
}