#pragma once

#include "core/component_interface.h"
#include "esp_err.h"
#include "esp_log.h"
#include "freertos/FreeRTOS.h"
#include "freertos/queue.h"

/**
 * @file serial_debug_driver.hdr  
 * @brief Self-contained ESP32 serial debug driver for PC audio redirection
 * 
 * Complete ESP32 component that intercepts audio streams intended for
 * embedded speakers (like MAX98357A) and redirects them to PC sound system
 * via ESP32 UART hardware. Includes full UART driver implementation and
 * integrates with tools/pc_audio_capture.py Python tool.
 */

// Debug driver initialization
esp_err_t serial_debug_driver_init(void);

// Debug driver main processing function  
void serial_debug_driver_act(void);

// Audio interception and PC redirect functions
esp_err_t serial_debug_driver_intercept_audio(const uint8_t* audio_data, size_t data_len);
esp_err_t serial_debug_driver_send_to_pc(const uint8_t* audio_data, size_t data_len);
esp_err_t serial_debug_driver_enable_pc_audio(bool enable);

// Debug control functions  
esp_err_t serial_debug_driver_set_sample_rate(uint32_t sample_rate);
esp_err_t serial_debug_driver_set_bit_depth(uint8_t bit_depth);
esp_err_t serial_debug_driver_set_buffer_size(uint16_t buffer_size);

// Status and monitoring
bool serial_debug_driver_is_pc_connected(void);
uint32_t serial_debug_driver_get_audio_stats(void);
void serial_debug_driver_print_debug_info(void);