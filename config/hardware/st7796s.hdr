// ST7796S Display Header
// RGB666 (18-bit color)

#ifndef ST7796S_HDR
#define ST7796S_HDR

#include <stdint.h>

// This struct acts as a "type bundle" for the st7796s hardware.
// Based on its JSON, it has a 320x480 resolution. Color depth is
// assumed to be 18-bit (RGB666) like its 'st7796' sibling.
struct st7796s
{
    // Standardized interface members
    static const int WIDTH = 320;
    static const int HEIGHT = 480;

    // 18-bit color depth (6 bits per channel)
    static const int MAX_RED   = 0x3F;
    static const int MAX_GREEN = 0x3F;
    static const int MAX_BLUE  = 0x3F;

    // Standardized nested Pixel type for RGB666
    struct Pixel
    {
        unsigned int red : 6;
        unsigned int green : 6;
        unsigned int blue : 6;

        Pixel() : red(0), green(0), blue(0) {}
        Pixel(const Pixel& other) { *this = other; }
        Pixel& operator=(const Pixel& other)
        {
            red = other.red;
            green = other.green;
            blue = other.blue;
            return *this;
        }
        Pixel operator+(const Pixel& other) const
        {
            Pixel result;
            unsigned int sum_r = red + other.red;
            result.red = (sum_r > MAX_RED) ? MAX_RED : sum_r;
            unsigned int sum_g = green + other.green;
            result.green = (sum_g > MAX_GREEN) ? MAX_GREEN : sum_g;
            unsigned int sum_b = blue + other.blue;
            result.blue = (sum_b > MAX_BLUE) ? MAX_BLUE : sum_b;
            return result;
        }
    };
};

#endif // ST7796S_HDR
