#ifndef GOBLIN_HEAD_COMPONENT_FUNCTIONS_HPP
#define GOBLIN_HEAD_COMPONENT_FUNCTIONS_HPP

#include <cstddef>
#include <cstdint>
#include "esp_err.h"

// Auto-generated by tools/generate_tables.py
// Subsystem: goblin_head
// Controller: ESP32_S3_R8N16

// ---------------------------------------------------------------------------
// Function prototypes
// ---------------------------------------------------------------------------
esp_err_t gc9a01_init(void);
void gc9a01_act(void);
esp_err_t generic_spi_display_init(void);
void generic_spi_display_act(void);
esp_err_t goblin_eye_init(void);
void goblin_eye_act(void);
esp_err_t goblin_left_eye_init(void);
void goblin_left_eye_act(void);
esp_err_t goblin_mouth_display_init(void);
void goblin_mouth_display_act(void);
esp_err_t goblin_mouth_mood_display_init(void);
void goblin_mouth_mood_display_act(void);
esp_err_t goblin_right_eye_init(void);
void goblin_right_eye_act(void);
esp_err_t spi_display_bus_init(void);
void spi_display_bus_act(void);

// Declarations from config\components\hardware\gc9a01.hdr
// gc9a01 component header
// Defines data structures for GC9A01 display

#ifndef GC9A01_HDR
#define GC9A01_HDR

#include <stdint.h>

// Display driver parameters for GC9A01 circular display  
// Note: Variables scoped within gc9a01 struct to avoid global namespace conflicts

// This struct acts as a "type bundle" for the gc9a01 hardware.
// It will be used as a template parameter for components that need its properties.
struct gc9a01
{
    // Standardized interface members
    static const int WIDTH = 240;
    static const int HEIGHT = 240;

    // Standardized color channel maximums
    static const int MAX_RED   = 0x1F;
    static const int MAX_GREEN = 0x3F;
    static const int MAX_BLUE  = 0x1F;

    // Standardized nested Pixel type
    struct Pixel
    {
        unsigned int red : 5;
        unsigned int green : 6;
        unsigned int blue : 5;

        // Default constructor
        Pixel() : red(0), green(0), blue(0) {}

        // Copy constructor
        Pixel(const Pixel& other)
        {
            red = other.red;
            green = other.green;
            blue = other.blue;
        }

        // Assignment operator
        Pixel& operator=(const Pixel& other)
        {
            red = other.red;
            green = other.green;
            blue = other.blue;
            return *this;
        }

        // Add two pixels with saturation
        Pixel operator+(const Pixel& other) const
        {
            Pixel result;
            unsigned int sum_r = red + other.red;
            result.red = (sum_r > MAX_RED) ? MAX_RED : sum_r;
            unsigned int sum_g = green + other.green;
            result.green = (sum_g > MAX_GREEN) ? MAX_GREEN : sum_g;
            unsigned int sum_b = blue + other.blue;
            result.blue = (sum_b > MAX_BLUE) ? MAX_BLUE : sum_b;
            return result;
        }
    };
};

#endif // GC9A01_HDR

// Declarations from config\components\drivers\generic_spi_display.hdr
#ifndef GENERIC_SPI_DISPLAY_HDR
#define GENERIC_SPI_DISPLAY_HDR

#include <esp_err.h>
#include <stdint.h>

/**
 * @brief Initialize generic_spi_display component
 * @return ESP_OK on success, error code otherwise
 */
esp_err_t generic_spi_display_init(void);

/**
 * @brief Execute generic_spi_display component action
 * Called periodically by subsystem dispatcher
 */
void generic_spi_display_act(void);

#endif // GENERIC_SPI_DISPLAY_HDR

// Declarations from config\bots\bot_families\goblins\head\goblin_eye.hdr
// goblin_eye.hdr
#ifndef GOBLIN_EYE_HDR
#define GOBLIN_EYE_HDR

#include "esp_err.h"

esp_err_t goblin_eye_init(void);
void goblin_eye_act(void);

#endif // GOBLIN_EYE_HDR

// Declarations from config\bots\bot_families\goblins\head\goblin_left_eye.hdr
// Auto-generated header for goblin_left_eye
#include <esp_err.h>

esp_err_t goblin_left_eye_init(void);
void goblin_left_eye_act(void);

// Declarations from config\bots\bot_families\goblins\head\goblin_right_eye.hdr
// Auto-generated header for goblin_right_eye
#include <esp_err.h>

esp_err_t goblin_right_eye_init(void);
void goblin_right_eye_act(void);

// Declarations from config\components\interfaces\spi_display_bus.hdr
// SPI display bus component header
// Exposes current SPI pin assignment for display devices

#ifndef SPI_DISPLAY_BUS_H
#define SPI_DISPLAY_BUS_H

#include "esp_err.h"
#include "driver/spi_master.h"
#include <stdio.h>

struct spi_display_pinset_t {
    spi_display_pinset_t()
        : mosi(-1), clk(-1), cs(-1), dc(-1), bl(-1), rst(-1), handle(nullptr) {}

    int mosi;
    int clk;
    int cs;
    int dc;
    int bl;
    int rst;
    spi_device_handle_t handle;

    void print() {
        printf("SPI_DISPLAY bus: mosi=%d, sclk=%d, cs=%d, dc=%d\n", mosi, clk, cs, dc);
    }
};

extern spi_display_pinset_t cur_spi_display_pin;

esp_err_t spi_display_bus_init(void);
void spi_display_bus_act(void);

#endif // SPI_DISPLAY_BUS_H

#endif // GOBLIN_HEAD_COMPONENT_FUNCTIONS_HPP
